--                    CRIA��O DAS TABELAS DO PROJETO

CREATE TABLE PRODUTOS(
    CODIGO VARCHAR(10) NOT NULL,
    DESCRITOR VARCHAR(100) NULL,
    SABOR VARCHAR(50) NULL,
    TAMANHO VARCHAR(50) NULL,
    EMBALAGEM VARCHAR(50)NULL,
    PRECO_LISTA FLOAT NULL,
    PRIMARY KEY(CODIGO) 
);

CREATE TABLE VENDEDORES(
    MATRICULA VARCHAR(5) NOT NULL,
    NOME VARCHAR(100) NULL,
    BAIRRO  VARCHAR(50) NULL,
    COMISSAO FLOAT NULL,
    DATA_ADIMISSAO DATE NULL,
    FERIAS INTEGER NULL,
    PRIMARY KEY(MATRICULA)
);

CREATE TABLE TABELA_DE_VENDAS(
    NUMERO VARCHAR(5) NOT NULL,
    DATA_VENDA DATE NULL,
    CPF VARCHAR(11) NOT NULL,
    MATRICULA VARCHAR(5) NOT NULL,
    IMPOSTO FLOAT NULL,
    PRIMARY KEY(NUMERO)
);

CREATE TABLE ITENS_NOTAS(
    NUMERO VARCHAR(5) NOT NULL,
    CODIGO VARCHAR(10) NOT NULL,
    QUANTIDADE INTEGER NULL,
    PRECO FLOAT,
    PRIMARY KEY(NUMERO,CODIGO)
);

--                      ALTERANDO O NOME DE UMA TABELA
-- RENOMEANDO A COLUNA DE DATA_ADIMISSAO PARA DATA_ADMISSAO
ALTER TABLE VENDEDORES
RENAME COLUMN DATA_ADIMISSAO
TO DATA_ADMISSAO;

-- RENOMEANDO A TABELA  - TABELA_DE_VENDAS PARA NOTAS
ALTER TABLE TABELA_DE_VENDAS 
RENAME TO NOTAS;

--                  CRIA��O DE CHAVES ESTRANGEIRAS DO ESQUEMA

-- FK DA TABELA_DE_VENDAS.CPF REFERENCIANDO CLIENTES.CPF
ALTER TABLE TABELA_DE_VENDAS ADD CONSTRAINT FK_CLIENTES_TABELA_DE_VENDAS
FOREIGN KEY (CPF)
REFERENCES CLIENTES(CPF);

-- FK DA TABELA_DE_VENDAS.MATRICULA REFERENCIANDO VENDEDORES.MATRICULA
ALTER TABLE TABELA_DE_VENDAS ADD CONSTRAINT FK_VENDEDORES_TABELA_DE_VENDAS
FOREIGN KEY (MATRICULA)
REFERENCES VENDEDORES(MATRICULA);

-- FK DA ITENS_NOTAS.NUMERO REFERENCIANDO NOTAS.NUMERO
ALTER TABLE ITENS_NOTAS ADD CONSTRAINT FK_NOTAS_ITENS_NOTAS
FOREIGN KEY (NUMERO)
REFERENCES NOTAS(NUMERO);


-- FK DA ITENS_NOTAS.CODIGO REFERENCIANDO PRODUTOS.CODIGO
ALTER TABLE ITENS_NOTAS ADD CONSTRAINT FK_PRODUTOS_ITENS_NOTAS
FOREIGN KEY (CODIGO)
REFERENCES PRODUTOS(CODIGO);

COMMIT;
